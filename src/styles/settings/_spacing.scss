//src/scss/settings/_spacing.scss

@use "sass:map";
@use "sass:math";


@use "./typography" as *;

// ---------------------------------------------
// Fluid spacing scale for padding, margin, gaps
// Uses px-based body sizes to prevent scaling with user font settings
// Interpolates between min/max values across viewport width
// ---------------------------------------------

$space-min-width: $fluid-min-width; // same viewports as typography
$space-max-width: $fluid-max-width;

// Precompute viewport range as a plain number (rem difference)
$space-width-range: math.div($space-max-width - $space-min-width, 1rem);

// Body sizes for spacing (in px)
$space-min-body: 16; // px at small screens
$space-max-body: 18; // px at large screens

// Multipliers to create t-shirt sizes (XS, S, M, L…)
$space-multipliers: (
  xs: 0.25,   // 0.25 × body size
  sm: 0.5,    // 0.5 × body size
  md: 1,      // 1 × body size
  lg: 1.5,    // 1.5 × body size
  xl: 2,      // 2 × body size
  '2xl': 3,   // 3 × body size
  '3xl': 4    // 4 × body size
);

// Helper functions to convert multipliers to rem (px / 16)
@function space-min($multiplier) {
  @return math.div($space-min-body * $multiplier, 16);
}

@function space-max($multiplier) {
   @return math.div($space-max-body * $multiplier, 16);
}

@function fluid-space($multiplier) {
  $min-rem: space-min($multiplier);
  $max-rem: space-max($multiplier);
  $delta: $max-rem - $min-rem;

   @return clamp(
    #{$min-rem}rem,
    calc(
      #{$min-rem}rem +
      #{$delta} * ((100vw - #{$space-min-width}) / #{$space-width-range})
    ),
    #{$max-rem}rem
  );
}

// Build the full spacing scale map using our multipliers
$space-scale: ();
@each $name, $multi in $space-multipliers {
  $space-scale: map.merge($space-scale, ($name: fluid-space($multi)));
}

// Export 0 for zero spacing
$space-scale: map.merge($space-scale, (0: 0));
